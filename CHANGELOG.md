# 📝 Sora批量出图工具 - 更新日志

所有重要的项目更改都记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本控制](https://semver.org/lang/zh-CN/)。

## [Unreleased] - 开发中

### 新增
- 专业开发工作流程和分支管理
- 自动化开发脚本 (`dev.sh`)
- 基础测试框架
- 开发文档和指南

## [3.4.0] - 2024-10-01

### ✨ 新增功能
- **智能选择系统** - 复选框批量选择，支持全选、单选、点击行选择
- **简化图片查看器** - 双击图片打开简洁全屏查看器，专注内容展示
- **历史记录智能去重** - 自动检测重复配置，避免保存相同内容的历史记录
- **Enhanced模型支持** - 改进nano-banana模型的响应解析，支持base64格式

### 🔧 优化改进
- **线程安全优化** - 修复UI操作中的线程安全问题，确保界面稳定响应
- **复选框生命周期管理** - 解决表格刷新时的控件删除错误
- **信号连接优化** - 修复lambda闭包问题，确保选择功能正常工作
- **异常处理增强** - 添加全面的错误处理机制，提升程序稳定性

### 🛡️ 安全与架构优化
- **SSL安全开关** - 默认开启证书校验，设置中心提供「允许不安全连接」选项
- **事件循环整合** - 接入 `qasync` 将 Qt 与 `asyncio` 合并运行，提升并发稳定性
- **模块化拆分** - 新增 `services/` 目录，功能模块化：
  - `pathing.py` - 路径管理
  - `images.py` - 图片与分类工具
  - `history.py` - 历史记录读写去重
  - `api_client.py` - API请求与响应解析
- **数据骨架** - 新增 `data/schema.sql`（SQLite示例结构）为后续升级做准备

### 🐛 修复问题
- 修复nano-banana模型请求失败问题
- 修复全选功能选中后内容未选中的问题
- 修复重新生成选中时软件闪退的问题
- 修复加载历史数据时QCheckBox被删除的错误
- 修复lambda闭包导致的选择功能异常

### 📖 文档更新
- 更新README.md，添加V3.4版本新功能说明
- 新增安装指南，支持虚拟环境和依赖安装
- 新增多平台启动方式说明
- 新增SSL证书、依赖安装等常见问题解答

## [3.3.0] - 之前版本

### ✨ 核心功能
- **批量智能生成** - CSV批量导入，智能生成模式，高速并发处理
- **智能参考图系统** - 分类管理，自动匹配，本地存储
- **风格库系统** - 预设风格，自定义风格，一键应用
- **多平台密钥管理** - 支持云雾AI、API易、apicore三大平台
- **智能文件管理** - 防覆盖保护，实时缩略图，状态跟踪

### 🎯 支持的功能
- 提示词批量处理和管理
- 图片生成状态实时跟踪
- 多种图片比例支持（3:2、2:3）
- 失败自动重试机制
- 图片文件防覆盖保护

---

## 版本说明

### 版本号格式
- **主版本号**：重大功能更新或架构变更
- **次版本号**：新增功能或重要改进
- **修订号**：Bug修复和小幅优化

### 更新类型标识
- 🆕 **新增** - 新功能
- 🔧 **改进** - 功能优化和性能提升
- 🐛 **修复** - Bug修复
- 🛡️ **安全** - 安全相关更新
- 📖 **文档** - 文档更新
- 🗑️ **移除** - 移除的功能

### 发布节奏
- **主版本**：根据重大功能更新发布
- **次版本**：每月1-2次，包含新功能和重要改进
- **修订版本**：根据需要随时发布Bug修复